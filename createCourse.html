<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>criar Aula</title>


    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
        crossorigin="anonymous">

    <script type="text/javascript" src="js/manageProfiles.js"></script>
    <script type="text/javascript" src="js/manageCourses.js"></script>
    <script type="text/javascript" src="js/js.js"></script>

    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script> -->
    <link rel="stylesheet" href="css/css.css">





</head>

<body>
    <div class="row">
        <div class="col">
            <nav class="navbar navbar-expand-lg navbar-dark" id="navbar">

                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav" id="navbarUL">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html" id="item00">Home

                            </a>
                        </li>

                    </ul>
                </div>
            </nav>
        </div>
    </div>

    <div class="row  justify-content-center">
        <div class="col-10 text-center">
            <h1 class="display-3">Cadastro de Aulas</h1>
        </div>
    </div>
    <form onsubmit=tagGrabber(nCourseTags); action="userProfile.html">
        <div class="row justify-content-center">
            <div class="col-8 ">
                <div class="input-group  mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="inputGroup-sizing-default"></span>
                    </div>
                    <input type="text" placeholder="Título" id="courseTitle" class="form-control" pattern="^[A-Za-z]+(\s[A-Za-z]+){0,2}$" required
                        title="Uma a três palavras com somente um espaço entre as palavras.">
                </div>
                <div class="input-group  mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="inputGroup-sizing-default"></span>
                    </div>
                    <select class="form-control" id="courseTag">
                        <option value="entretenimento">Entretenimento</option>
                        <option value="idioma">Idioma</option>
                        <option value="escolar">Escolar</option>
                        <option value="direito">Direito</option>
                        <option value="tecnologia">Tecnologia</option>
                        <option value="esportes">Esportes</option>
                        <option value="outros">Outros</option>
                    </select>
                </div>
                <div class="input-group  mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="inputGroup-sizing-default"></span>
                    </div>
                    <input type="text" placeholder="Custo/Aula" id="courseCost" class="form-control" pattern="[0-9]+" required title="Informe um valor numérico">
                </div>

                <div class="input-group  mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="inputGroup-sizing-default"></span>
                    </div>
                    <textarea class="form-control" aria-label="With textarea" id="courseDescrip" placeholder="Descrição" required title="Informe qualquer coisa"></textarea>
                </div>
                <!-- <div class="input-group  mb-3 justify-content-center">
                    <div>
                        <div class="input-group  mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="inputGroup-sizing-default"></span>
                            </div>
                            <select class="selectpicker" id="dias" multiple title="Dias da semana">

                                <option value="1">DOM</option>
                                <option value="1">SEG</option>
                                <option value="1">TER</option>
                                <option value="1">QUA</option>
                                <option value="1">QUI</option>
                                <option value="1">SEX</option>
                                <option value="1">SAB</option>

                            </select>
                        </div>
                    </div>
                    <div>
                        <div class="input-group  mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="inputGroup-sizing-default"></span>
                            </div>
                            <select class="selectpicker" id="horas" multiple title="Horários">

                                <option value="1">08:00</option>
                                <option value="1">09:00</option>
                                <option value="1">10:00</option>
                                <option value="1">11:00</option>
                                <option value="1">12:00</option>
                                <option value="1">13:00</option>
                                <option value="1">14:00</option>
                                <option value="1">15:00</option>
                                <option value="1">16:00</option>
                                <option value="1">17:00</option>
                                <option value="1">18:00</option>
                                <option value="1">19:00</option>
                                <option value="1">20:00</option>

                            </select>
                        </div>
                    </div>


                </div> -->

            </div>
        </div>
        </div>

        <div class="row justify-content-center">
            <div class="col-8 text-center">
                <input type="submit" id="btnSend" class="btn btn-dark btn-lg">
            </div>
        </div>
    </form>
    <script>
        // informações importantes que serão usadas já
        var dias = [];
        var horas = [];
        var nCourseTags = [];
        var courses = ManageCourses.get();

        function time() {

            // reservado para uso futuro
            // nCourseTags = nCourseTags;
            // var a = document.getElementById("horas");
            // var b = document.getElementById("dias");
            // dias = [];
            // horas = [];
            // for (var i = 0; i < b.options.length; i++) {
            //     if (b.options[i].selected == true) {
            //         dias.push(b.options[i].value);
            //     }
            //     else {
            //         dias.push(0);
            //     }
            // }
            // for (var i = 0; i < a.options.length; i++) {
            //     if (a.options[i].selected == true) {
            //         horas.push(a.options[i].value);
            //     }
            //     else {
            //         horas.push(0);
            //     }
            // }
            // console.log(horas);
            // console.log(dias);
            createNewCourse(nCourseTags, dias, horas);
        }

        function tagGrabber() {
            nCourseTags = document.getElementById("courseTag").value;
            // reservado para uso futuro
            // nCourseTags = [];
            // for (var i = 0; i < a.options.length; i++) {
            //     if (a.options[i].selected == true) {
            //         nCourseTags.push(a.options[i].value);
            //     }
            // }
            time(nCourseTags, dias, horas);
        }



        // reservado para uso futuro
        // document.getElementById("btnSend").addEventListener("click", function () {
        //     // verify();
        //     //Retirar createNewProfile() e colocar verify no lugar
        //     tagGrabber(nCourseTags, dias, horas);
        // });
        // var week = document.getElementsByClassName("weekday");
        // console.log(week);

        // coletar as informações dos inputs e criar a aula nova
        function createNewCourse() {
            //função para o ID
            var A = NewID();
            // informações
            var B = sessionStorage.userLogged;
            var C = document.getElementById("courseTitle").value;
            var D = document.getElementById("courseDescrip").value;
            var E = document.getElementById("courseCost").value;
            var F = nCourseTags;
            var G = dias;
            var H = horas;
            // contracted tem que ser "" por padrão, pois é usado dessa forma mesmo
            var I = "";            
            // se tudo deu certo e nada deu errado, então é criado uma aula nova no nosso Banco de Dados supimpa
            ManageCourses.add(new Course(A, B, C, D, E, F, G, H, I));            
            alert("Aula cadastrada com sucesso");
        }

        //cria um id aleatório e chama verificação
        function NewID() {
            var generated = Math.floor(Math.random() * 9999) + 1111;
            IDVerify(generated);
            return generated;
        }

        // lê os IDs disponíveis e chama outra vez a função que cria um ID se necessário
        function IDVerify(generated) {
            // varre as aulas comparando o ID delas
            for (let i = 0; i < courses.length; i++) {
                 // devido ao JSON esse IF serve para não dar erro ¯\_(ツ)_/¯ HAHAHAHAHAHAH, sabe Deus o que acontece com o JSON
                if (i == 0) {
                    i = "0";
                }
                const element = courses[i];
                // compara e chama novamente
                if (element.id == generated) {
                    NewID();
                }
            }
            // ou retorna o ID se nada de certo estiver errado
            return generated;
        }

        agr();
        document.getElementById("item05").className += " active";
        // myFunction();
    </script>


</body>

</html>
